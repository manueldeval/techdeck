doctype html
html(style="height:100%")
  head

    //- CODE MIRROR
    link(rel="stylesheet" href="/codemirror/lib/codemirror.css")
    link(rel="stylesheet" href="/codemirror/theme/"+params.theme+".css")

    script(type="text/javascript" src="/codemirror/lib/codemirror.js")
    //- active-line.js
    script(src="codemirror/addon/selection/active-line.js")
    //- styleSelectedText
    script(src="codemirror/addon/selection/mark-selection.js")
    script(src="codemirror/addon/search/searchcursor.js")
    //- highlightSelectionMatches

    link(rel="stylesheet" href="/codemirror/addon/scroll/simplescrollbars.css")
    script(src="codemirror/addon/scroll/simplescrollbars.js")
    script(src="codemirror/addon/scroll/annotatescrollbar.js")
    script(src="codemirror/addon/search/matchesonscrollbar.js")
    script(src="codemirror/addon/search/searchcursor.js")
    script(src="codemirror/addon/search/match-highlighter.js")
    //- keyMap
    script(src="codemirror/mode/clike/clike.js")
    script(src="codemirror/addon/edit/matchbrackets.js")
    script(src="codemirror/addon/comment/comment.js")
    script(src="codemirror/addon/dialog/dialog.js")
    script(src="codemirror/addon/dialog/dialog.css")
    script(src="codemirror/addon/search/searchcursor.js")
    script(src="codemirror/addon/search/search.js")
    script(src="codemirror/keymap/sublime.js")
    //- foldGutter
    script(src="codemirror/addon/fold/foldgutter.css")
    script(src="codemirror/addon/fold/brace-fold.js")
    script(src="codemirror/addon/fold/comment-fold.js")
    script(src="codemirror/addon/fold/foldcode.js")
    script(src="codemirror/addon/fold/foldgutter.js")
    script(src="codemirror/addon/fold/indent-fold.js")
    script(src="codemirror/addon/fold/markdown-fold.js")
    script(src="codemirror/addon/fold/xml-fold.js")
    
    link(src="codemirror/addon/display/fullscreen.css")
    script(src="codemirror/addon/display/fullscreen.js")


    script(src="codemirror/mode/"+params.mode+"/"+params.mode+".js")
    style.
      body {
        margin: 0;
        padding: 0;
        height:100%;
      }
      textarea {  /* position is inherited */
        left: 0; 
        top: 0; 
        right: 0;
        bottom: 100%;  /* Actually the height of select and input */
        /*width: 100%;*/
      }
      .CodeMirror {
        float: left; 
        width: 100%; 
        height: 100%;
        font-size: #{params.fontSize}px; 
      }
  body
    textarea(id="code" name="code")

    script.
      var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
        mode: "#{params.mode}",
        theme: "#{params.theme}",
        lineNumbers: true,
        scrollbarStyle: "simple"
      });
      editor.setSize("100%","100%");
